<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mis Citas Acumuladas</title>
    <link rel="stylesheet" href="/dis_ind.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body style="background: #0f0f0f; color: white;">

    <header class="custom-navbar">
        <div class="logo-area"><span class="gold-text">MIS</span>CITAS</div>
        <nav class="nav-menu">
            <a href="welcome.html" class="btn-ingresar" style="text-decoration: none; display: block; text-align: center;">INICIO</a>
            <a href="agenda.html" class="btn-ingresar" style="text-decoration: none; display: block; text-align: center;">AGENDA</a>
            <a href="+Tratamientos.html" class="btn-ingresar" style="text-decoration: none; display: block; text-align: center;">MÁS TRATAMIENTOS</a>
            <a href="Sucursales.html" class="btn-ingresar" style="text-decoration: none; display: block; text-align: center;">SUCURSALES</a> 
            <a href="index.html" class="btn-ingresar" style="text-decoration: none; display: block; text-align: center;">SALIR</a>
      </nav>
    </header>

    <main class="container">
        <h2 class="section-title">Historial de Citas Agendadas</h2>
        <div id="contenedor-citas">
            </div>
    </main>

    <script>
        function cargarCitas() {
            const contenedor = document.getElementById('contenedor-citas');
            const citas = JSON.parse(localStorage.getItem('misCitas')) || [];

            if (citas.length === 0) {
                contenedor.innerHTML = '<p style="text-align:center; opacity:0.5;">No tienes citas agendadas actualmente.</p>';
                return;
            }

            // Invertir para que la más reciente aparezca arriba
            citas.reverse().forEach(cita => {
                const card = document.createElement('div');
                card.style = "background: #1a1a1a; border-left: 5px solid #d4af37; padding: 20px; margin-bottom: 15px; border-radius: 5px;";
                
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3 style="color: #d4af37; margin: 0;">${cita.servicio}</h3>
                            <p style="margin: 5px 0;"><i class="fas fa-calendar"></i> ${cita.fecha} | <i class="fas fa-clock"></i> ${cita.hora}</p>
                            <p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">
                                <i class="fas fa-store"></i> ${cita.sucursal} <br>
                                <i class="fas fa-user-tie"></i> ${cita.especialista}
                            </p>
                        </div>
                        <div style="text-align: right;">
                            <span style="color: #d4af37; font-weight: bold;">CONFIRMADA</span>
                        </div>
                    </div>
                `;
                contenedor.appendChild(card);
            });
        }

        function limpiarCitas() {
            if(confirm("¿Deseas borrar todo el historial?")) {
                localStorage.removeItem('misCitas');
                location.reload();
            }
        }

        // Ejecutar al abrir la página
        window.onload = cargarCitas;
    </script>
</body>
</html>